parsers:
  # 在url处填入节点订阅链接
  - url: 
    yaml:
      commands:
        # 删除自带的策略组
        - proxy-groups-
        # 删除自带的规则
        - rules-

  # 在url处填入节点订阅链接
  - url: 
    yaml:
      # 添加自定义策略组
      append-proxy-groups:
        # 按功能添加策略组
        - name: 📌 Final
          type: select
          proxies:
        - name: 📡 Global
          type: select
          proxies:
        - name: 🎬 Streaming
          type: select
          proxies:
        - name: 📺 StreamingSE
          type: select
          proxies:
        # 按地区划分节点
        - name: 🇭🇰 HongKong
          type: select
          proxies:
        - name: 🇯🇵 Japan
          type: url-test
          url: http://www.google.com/generate_204
          interval: 600
          proxies:
        - name: 🇨🇳 Taiwan
          type: url-test
          url: http://www.google.com/generate_204
          interval: 600
          proxies:
        - name: 🇺🇸 UnitedStates
          type: url-test
          url: http://www.google.com/generate_204
          interval: 600
          proxies:
        - name: 🇸🇬 Singapore
          type: url-test
          url: http://www.google.com/generate_204
          interval: 600
          proxies:
        - name: 🇷🇺 Russia
          type: url-test
          url: http://www.google.com/generate_204
          interval: 600
          proxies:
        - name: 🇰🇷 Korea
          type: url-test
          url: http://www.google.com/generate_204
          interval: 600
          proxies:
        - name: 🇬🇧 UnitedKingdom
          type: url-test
          url: http://www.google.com/generate_204
          interval: 600
          proxies:
        - name: 🇲🇾 Malaysia
          type: url-test
          url: http://www.google.com/generate_204
          interval: 600
          proxies:
        - name: 🇩🇪 Germany
          type: url-test
          url: http://www.google.com/generate_204
          interval: 600
          proxies:

      # 添加远程规则
      mix-rule-providers:
        Unbreak:
          type: http
          behavior: classical
          path: ./RuleSet/Unbreak.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/Unbreak.yaml
          interval: 86400
        Advertising:
          type: http
          behavior: classical
          path: ./RuleSet/Advertising.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/Guard/Advertising.yaml
          interval: 86400
        Privacy:
          type: http
          behavior: classical
          path: ./RuleSet/Privacy.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/Guard/Privacy.yaml
          interval: 86400
        Hijacking:
          type: http
          behavior: classical
          path: ./RuleSet/Hijacking.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/Guard/Hijacking.yaml
          interval: 86400
        Streaming:
          type: http
          behavior: classical
          path: ./RuleSet/Streaming.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/Streaming.yaml
          interval: 86400
        StreamingSE:
          type: http
          behavior: classical
          path: ./RuleSet/StreamingSE.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/StreamingSE.yaml
          interval: 86400
        StreamingCN:
          type: http
          behavior: classical
          path: ./RuleSet/StreamingCN.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/StreamingCN.yaml
          interval: 86400
        Global:
          type: http
          behavior: classical
          path: ./RuleSet/Global.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/Global.yaml
          interval: 86400
        China:
          type: http
          behavior: classical
          path: ./RuleSet/China.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/China.yaml
          interval: 86400
        ChinaIP:
          type: http
          behavior: ipcidr
          path: ./RuleSet/ChinaIP.yaml
          url: https://raw.githubusercontents.com/DivineEngine/Profiles/master/Clash/RuleSet/Extra/ChinaIP.yaml
          interval: 86400

      append-rules:
        # 为远程规则指定策略
        - RULE-SET, Unbreak, DIRECT
        - RULE-SET, Advertising, REJECT
        - RULE-SET, Privacy, REJECT
        - RULE-SET, Hijacking, REJECT
        - RULE-SET, Streaming, 🎬 Streaming
        - RULE-SET, StreamingSE, 📺 StreamingSE
        - RULE-SET, StreamingCN, DIRECT
        - RULE-SET, Global, 📡 Global
        - RULE-SET, China, DIRECT
        - RULE-SET, ChinaIP, DIRECT
        # 添加本地规则
        - IP-CIDR, 10.0.0.0/8, DIRECT, no-resolve
        - IP-CIDR, 100.64.0.0/10, DIRECT, no-resolve
        - IP-CIDR, 119.28.28.28/32, DIRECT, no-resolve
        - IP-CIDR, 127.0.0.0/8, DIRECT, no-resolve
        - IP-CIDR, 172.16.0.0/12, DIRECT, no-resolve
        - IP-CIDR, 192.168.0.0/16, DIRECT, no-resolve
        - IP-CIDR6, ::1/128, DIRECT, no-resolve
        - IP-CIDR6, fc00::/7, DIRECT, no-resolve
        - IP-CIDR6, fe80::/10, DIRECT, no-resolve
        - IP-CIDR6, fd00::/8, DIRECT, no-resolve
        - DOMAIN-SUFFIX, local, DIRECT
        - GEOIP, CN, DIRECT
        - MATCH, 📌 Final

      commands:
        # 为节点组添加对应地区的节点
        - proxy-groups.(🇭🇰 HongKong).proxies=[]proxyNames|香港|深港专线[^转]
        - proxy-groups.(🇯🇵 Japan).proxies=[]proxyNames|日本
        - proxy-groups.(🇨🇳 Taiwan).proxies=[]proxyNames|台湾
        - proxy-groups.(🇺🇸 UnitedStates).proxies=[]proxyNames|美国
        - proxy-groups.(🇸🇬 Singapore).proxies=[]proxyNames|新加坡
        - proxy-groups.(🇷🇺 Russia).proxies=[]proxyNames|俄罗斯
        - proxy-groups.(🇰🇷 Korea).proxies=[]proxyNames|韩国
        - proxy-groups.(🇬🇧 UnitedKingdom).proxies=[]proxyNames|英国
        - proxy-groups.(🇲🇾 Malaysia).proxies=[]proxyNames|马来西亚
        - proxy-groups.(🇩🇪 Germany).proxies=[]proxyNames|德国
        # 为自定义策略组添加节点组
        - proxy-groups.(📌 Final).proxies=[]groupNames|^(?!📌|📡|🎬|📺).*
        - proxy-groups.(📡 Global).proxies=[]groupNames|^(?!📌|📡|🎬|📺).*
        - proxy-groups.(🎬 Streaming).proxies=[]groupNames|^(?!📌|📡|🎬|📺).*
        - proxy-groups.(📺 StreamingSE).proxies=[]groupNames|^(?!📌|📡|🎬|📺).*
        # 为Final和StreamingSE添加直连节点
        - proxy-groups.(📌 Final).proxies.0+DIRECT
        - proxy-groups.(📺 StreamingSE).proxies.0+DIRECT
