<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>更新时的一个问题</title>
    <!-- 引入 Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
    <style>
      button {
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <!-- 准备一个容器【Vue 模板】 -->
    <div id="root">
      <h1>更新时的一个问题</h1>

      <!-- v-for 遍历数组 -->
      <h3>遍历数组</h3>

      <button @click="updateMDM">更新马冬梅的信息</button>

      <ul>
        <li v-for="(per,index) in persons" :key="per.id">{{index}}--{{per.id}}: {{per.name}}, {{per.age}}岁, {{per.sex}}</li>
      </ul>
    </div>

    <script type="text/javascript">
      // 阻止 vue 在启动时生成生产提示。
      Vue.config.productionTip = false;

      const vm = new Vue({
        el: "#root",
        data() {
          return {
            persons: [
              {
                id: "001",
                name: "马冬梅",
                age: 13,
                sex: "女",
              },
              {
                id: "002",
                name: "周杰伦",
                age: 35,
                sex: "男",
              },
              {
                id: "003",
                name: "周冬雨",
                age: 78,
                sex: "女",
              },
              {
                id: "004",
                name: "温兆伦",
                age: 41,
                sex: "男",
              },
            ],
          };
        },
        methods: {
          updateMDM() {
            // 奏效
            // this.persons[0].name = "马老师";
            // this.persons[0].age = 50;
            // this.persons[0].sex = "男";

            // 不奏效
            // this.persons[0] = {
            //   name: "马老师",
            //   age: 50,
            //   sex: "男",
            // };
            // 奏效
            this.persons.splice(0, 1, {
              id: "001",
              name: "马老师",
              age: 50,
              sex: "男",
            });
          },
        },
      });
    </script>
  </body>
</html>
