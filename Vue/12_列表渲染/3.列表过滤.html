<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>列表过滤</title>
    <!-- 引入 Vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
    <style>
      button {
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <!-- 准备一个容器【Vue 模板】 -->
    <div id="root">
      <h1>列表过滤</h1>

      <!-- v-for 遍历数组 -->
      <h3>遍历数组</h3>
      <!-- 模糊搜索 -->
      <input type="text" placeholder="请输入名字" v-model="keyWord" />

      <ul>
        <li v-for="(per,index) in filPersons" :key="per.id">{{index}}--{{per.id}}: {{per.name}}, {{per.age}}岁, {{per.sex}}</li>
      </ul>
    </div>

    <script type="text/javascript">
      // 阻止 vue 在启动时生成生产提示。
      Vue.config.productionTip = false;

      // // watch 实现
      // const vm = new Vue({
      //   el: "#root",
      //   data() {
      //     return {
      //       keyWord: "",
      //       persons: [
      //         {
      //           id: "001",
      //           name: "马冬梅",
      //           age: "18",
      //           sex: "女",
      //         },
      //         {
      //           id: "002",
      //           name: "周杰伦",
      //           age: "28",
      //           sex: "男",
      //         },
      //         {
      //           id: "003",
      //           name: "周冬雨",
      //           age: "38",
      //           sex: "女",
      //         },
      //         {
      //           id: "004",
      //           name: "温兆伦",
      //           age: "48",
      //           sex: "男",
      //         },
      //       ],
      //       filPersons: [],
      //     };
      //   },
      //   watch: {
      //     keyWord: {
      //       immediate: true,
      //       handler(val) {
      //         this.filPersons = this.persons.filter((per) => {
      //           return per.name.indexOf(val) !== -1;
      //         });
      //       },
      //     },
      //   },
      // });

      // computed 实现
      const vm = new Vue({
        el: "#root",
        data() {
          return {
            keyWord: "",
            persons: [
              {
                id: "001",
                name: "马冬梅",
                age: "18",
                sex: "女",
              },
              {
                id: "002",
                name: "周杰伦",
                age: "28",
                sex: "男",
              },
              {
                id: "003",
                name: "周冬雨",
                age: "38",
                sex: "女",
              },
              {
                id: "004",
                name: "温兆伦",
                age: "48",
                sex: "男",
              },
            ],
          };
        },
        computed: {
          filPersons() {
            return this.persons.filter((per) => {
              return per.name.indexOf(this.keyWord) !== -1;
            });
          },
        },
      });
    </script>
  </body>
</html>
